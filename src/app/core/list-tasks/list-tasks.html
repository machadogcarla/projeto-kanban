@if (loading()) {
  <div class="spinner-container">
    <p-progress-spinner ariaLabel="loading" />
  </div>
}

@if (!loading()) {
  <div class="div-filtros">
    <p-button label="Nova task" icon="pi pi-plus" (onClick)="openDrawerTask('Nova Task')" />
    <app-urgent-tasks-badge />
  </div>

  <div class="div-filtros mt-40">
    <app-filters />
  </div>

  <div class="container">
    <p-panel>
      <div class="kanban">
        <app-column-kanban
          titulo="A Fazer"
          status="a-fazer"
          [lista]="todo()"
          [statusList]="['em-andamento', 'concluido']"
          (dropped)="drop($event)"
          (taskRemoved)="onTaskRemoved($event)"
          (taskToDone)="onTaskToDone($event)"
        />

        <app-column-kanban
          titulo="Em Andamento"
          status="em-andamento"
          [lista]="inProgress()"
          [statusList]="['a-fazer', 'concluido']"
          (dropped)="drop($event)"
          (taskRemoved)="onTaskRemoved($event)"
          (taskToDone)="onTaskToDone($event)"
        />

        <app-column-kanban
          titulo="ConcluÃ­do"
          status="concluido"
          [lista]="done()"
          [statusList]="['a-fazer', 'em-andamento']"
          (dropped)="drop($event)"
          (taskRemoved)="onTaskRemoved($event)"
          (taskToDone)="onTaskToDone($event)"
        />
      </div>
    </p-panel>
  </div>
}

<p-drawer [header]="titleDrawer" [(visible)]="openDrawer" position="right" [style]="{ width: '30rem' }">
  @if (openDrawer){
    <app-form-tasks />
  }
</p-drawer>
